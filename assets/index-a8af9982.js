import{a as O}from"./doll-bad041b4.js";import{E as n,d as j,z as q,r,Y as Z,N as G,j as I,C as J,V as Q,h as i,o as m,c as W,a,w as o,b as f,u as h,Z as D,e as k,i as y,t as w,M as X,g as ee}from"./index-a2efab08.js";const te=[{title:n("pages.devices.user"),align:"left",width:160,colKey:"userName",fixed:"left"},{title:n("pages.devices.userId"),colKey:"userId",width:160},{title:n("pages.devices.model"),width:160,ellipsis:!0,colKey:"model"},{title:n("pages.devices.modelName"),width:160,ellipsis:!0,colKey:"modelName"},{title:n("pages.devices.lastDataReportTime"),width:160,ellipsis:!0,colKey:"lastTime"},{title:n("pages.devices.onlineStatus"),width:160,ellipsis:!0,colKey:"statusFlag"},{title:n("pages.devices.toyActivationTime"),width:160,ellipsis:!0,colKey:"activateTime"},{title:n("pages.devices.subscriptionDetails"),width:160,ellipsis:!0,colKey:"orderNo"},{title:n("pages.devices.operation"),align:"left",fixed:"right",width:160,colKey:"op"}],ae={class:"search-input"},se={class:"search-input"},oe={class:"search-input"},le={name:"ListBase"},ne=j({...le,setup(ie){const S=q(),u=r([]),c=r({pageSize:20,total:100,current:1}),t=Z({userId:"",payId:"",beginDate:"",endDate:""}),K=e=>{console.log("val>>>",e),t.beginDate=e[0],t.endDate=e[1],p()};G(()=>t.userId,e=>{e.length===0&&p()});const _=r(!1),p=async()=>{_.value=!0;try{const e=await O({language:"",page:{pageIndex:c.value.current,pageSize:c.value.pageSize},query:{beginDate:t.beginDate,endDate:t.endDate,payId:t.payId,userId:t.userId}});u.value=e.content,c.value={...c.value,total:e.totalCount}}catch(e){console.log(e)}finally{_.value=!1}},d=r(-1),V=I(()=>{if(d.value>-1){const{name:e}=u.value[d.value];return`删除后，${e}的所有合同信息将被清空，且无法恢复`}return""});J(()=>{p()});const g=r(!1),v=r([1,2]),b=()=>{d.value=-1},N=()=>{u.value.splice(d.value,1),c.value.total=u.value.length;const e=v.value.indexOf(d.value);e>-1&&v.value.splice(e,1),g.value=!1,X.success("删除成功"),b()},T=()=>{b()},$="index",z=e=>{v.value=e},B=(e,s)=>{console.log("分页变化",e,s)},E=(e,s)=>{console.log("统一Change",e,s)},M=e=>{d.value=e.rowIndex,g.value=!0},U=I(()=>({offsetTop:S.isUseTabsRouter?48:0,container:`.${Q}-layout`}));return(e,s)=>{const x=i("t-input"),Y=i("t-date-range-picker"),L=i("t-row"),C=i("t-tag"),F=i("t-link"),H=i("t-space"),P=i("t-table"),R=i("t-card"),A=i("t-dialog");return m(),W("div",null,[a(R,{class:"list-card-container",bordered:!1},{default:o(()=>[a(L,null,{default:o(()=>[f("div",ae,[a(x,{modelValue:t.userId,"onUpdate:modelValue":s[0]||(s[0]=l=>t.userId=l),placeholder:e.$t("pages.payment.placeholderuserid"),clearable:"",onEnter:p},{"suffix-icon":o(()=>[a(h(D),{size:"16px"})]),_:1},8,["modelValue","placeholder"])]),f("div",se,[a(x,{modelValue:t.payId,"onUpdate:modelValue":s[1]||(s[1]=l=>t.payId=l),placeholder:e.$t("pages.payment.placeholderpayid"),clearable:"",onEnter:p},{"suffix-icon":o(()=>[a(h(D),{size:"16px"})]),_:1},8,["modelValue","placeholder"])]),f("div",oe,[a(Y,{mode:"week","value-type":"YYYY-MM-DD HH:mm:ss",clearable:"","allow-input":"",onChange:K})])]),_:1}),a(P,{data:u.value,columns:h(te),"row-key":$,"vertical-align":"top",hover:!0,pagination:c.value,"selected-row-keys":v.value,loading:_.value,"header-affixed-top":U.value,onPageChange:B,onChange:E,onSelectChange:z},{statusFlag:o(({row:l})=>[l.statusFlag?(m(),k(C,{key:0,theme:"success",variant:"light"},{default:o(()=>[y(w(e.$t("pages.devices.onlineStatusEnum.online")),1)]),_:1})):(m(),k(C,{key:1,theme:"danger",variant:"light"},{default:o(()=>[y(w(e.$t("pages.devices.onlineStatusEnum.offline")),1)]),_:1}))]),op:o(l=>[a(H,null,{default:o(()=>[a(F,{theme:"danger",onClick:ce=>M(l)},{default:o(()=>[y(w(e.$t("pages.devices.stop")),1)]),_:2},1032,["onClick"])]),_:2},1024)]),_:1},8,["data","columns","pagination","selected-row-keys","loading","header-affixed-top"])]),_:1}),a(A,{visible:g.value,"onUpdate:visible":s[2]||(s[2]=l=>g.value=l),header:"确认删除当前所选合同？",body:V.value,"on-cancel":T,onConfirm:N},null,8,["visible","body"])])}}});const ue=ee(ne,[["__scopeId","data-v-2103b64c"]]);export{ue as default};
