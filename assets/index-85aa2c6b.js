import{g as te}from"./doll-6053fa5a.js";import{E as i,d as se,z as le,r as l,Y as ne,N as oe,j as M,W as ie,C as ce,h as o,o as k,c as de,a as s,w as n,b as h,u as D,Z as z,i as r,e as T,t as g,M as ue,g as re}from"./index-9eb1327f.js";import{_ as pe}from"./addDays.vue_vue_type_script_setup_true_lang-d75d3136.js";import{_ as ve}from"./reviewUserNextPlan.vue_vue_type_script_setup_true_lang-8d15b5a3.js";const ge=[{title:i("pages.devices.userId"),align:"left",width:160,colKey:"userId",fixed:"left"},{title:i("pages.devices.username"),colKey:"userName",width:160},{title:i("pages.devices.status"),width:160,ellipsis:!0,colKey:"statusFlag"},{title:i("pages.devices.currentDollModel"),width:160,ellipsis:!0,colKey:"model"},{title:i("pages.devices.registrationTime"),width:160,ellipsis:!0,colKey:"createTime"},{title:i("pages.devices.totalRechargeAmount"),width:160,ellipsis:!0,colKey:"amount"},{title:i("pages.devices.operation"),align:"left",fixed:"right",width:360,colKey:"op"}],me={class:"search-input"},_e={class:"search-input"},fe={class:"search-input"},he={class:"search-input"},ye={name:"Devices"},be=se({...ye,setup(Ce){const B=le(),p=l([]),c=l({pageSize:20,total:100,current:1}),x=l(""),d=ne({beginDate:"",endDate:"",userId:""}),y=l(!1),v=async()=>{y.value=!0;try{const e=await te({language:"",page:{pageIndex:c.value.current,pageSize:c.value.pageSize},query:d});p.value=e.content,c.value={...c.value,total:e.totalCount}}catch(e){console.log(e)}finally{y.value=!1}},m=l([1,2]),O=e=>{console.log("val>>>",e);const[a,f]=e;d.beginDate=a,d.endDate=f,v()};oe(()=>d.userId,e=>{e.length===0&&v()});const _=l(!1),Y=e=>{u.value=e.rowIndex,_.value=!0},$=()=>{u.value=-1},u=l(-1),F=M(()=>{if(u.value>-1){const{userName:e,model:a}=p.value[u.value];return`确认停用用户${e}的玩偶${a}?`}return""}),A=()=>{p.value.splice(u.value,1),c.value.total=p.value.length;const e=m.value.indexOf(u.value);e>-1&&m.value.splice(e,1),_.value=!1,ue.success("删除成功"),$()},H=()=>{$()},R="index",E=e=>{m.value=e},L=(e,a)=>{console.log("分页变化",e,a),v()},j=(e,a)=>{console.log("统一Change",e,a)},b=l(!1),V=l({}),I=l(""),q=e=>{V.value=e.row,I.value=e.row.userName,b.value=!0},C=l(!1),U=l({}),N=l(""),P=e=>{U.value=e.row,N.value=e.row.userName,C.value=!0},W=M(()=>({offsetTop:B.isUseTabsRouter?48:0,container:`.${ie}-layout`}));return ce(()=>{v()}),(e,a)=>{const f=o("t-input"),Z=o("t-date-range-picker"),G=o("t-button"),J=o("t-row"),K=o("t-tag"),w=o("t-link"),Q=o("t-space"),X=o("t-table"),ee=o("t-card"),ae=o("t-dialog");return k(),de("div",null,[s(ee,{class:"list-card-container",bordered:!1},{default:n(()=>[s(J,null,{default:n(()=>[h("div",me,[s(f,{modelValue:d.userId,"onUpdate:modelValue":a[0]||(a[0]=t=>d.userId=t),placeholder:e.$t("pages.payment.placeholderuserid"),clearable:""},{"suffix-icon":n(()=>[s(D(z),{size:"16px"})]),_:1},8,["modelValue","placeholder"])]),h("div",_e,[s(f,{modelValue:x.value,"onUpdate:modelValue":a[1]||(a[1]=t=>x.value=t),placeholder:e.$t("pages.payment.placeholderpayid"),clearable:""},{"suffix-icon":n(()=>[s(D(z),{size:"16px"})]),_:1},8,["modelValue","placeholder"])]),h("div",fe,[s(Z,{"value-type":"YYYY-MM-DD HH:mm:ss",mode:"week",clearable:"","allow-input":"",onChange:O})]),h("div",he,[s(G,{onClick:v},{default:n(()=>[r("查询")]),_:1})])]),_:1}),s(X,{data:p.value,columns:D(ge),"row-key":R,"vertical-align":"top",hover:!0,pagination:c.value,"selected-row-keys":m.value,loading:y.value,"header-affixed-top":W.value,onPageChange:L,onChange:j,onSelectChange:E},{statusFlag:n(({row:t})=>[t.statusFlag==="1"?(k(),T(K,{key:0,theme:"success",variant:"light"},{default:n(()=>[r(g(e.$t("pages.devices.statusOptions.normal")),1)]),_:1})):(k(),T(K,{key:1,theme:"danger",variant:"light"},{default:n(()=>[r(g(e.$t("pages.devices.statusOptions.disabled")),1)]),_:1}))]),op:n(t=>[s(Q,null,{default:n(()=>[s(w,{theme:"primary",onClick:S=>P(t)},{default:n(()=>[r(g(e.$t("pages.devices.viewUserPlan")),1)]),_:2},1032,["onClick"]),s(w,{theme:"success",onClick:S=>q(t)},{default:n(()=>[r(g(e.$t("pages.devices.addVipDays")),1)]),_:2},1032,["onClick"]),s(w,{theme:"danger",onClick:S=>Y(t)},{default:n(()=>[r(g(t.row.statusFlag===1?e.$t("pages.devices.disable"):e.$t("pages.devices.enable")),1)]),_:2},1032,["onClick"])]),_:2},1024)]),_:1},8,["data","columns","pagination","selected-row-keys","loading","header-affixed-top"])]),_:1}),s(ae,{visible:_.value,"onUpdate:visible":a[2]||(a[2]=t=>_.value=t),header:"确定停用此玩偶？",body:F.value,"on-cancel":H,onConfirm:A},null,8,["visible","body"]),s(pe,{visible:b.value,"onUpdate:visible":a[3]||(a[3]=t=>b.value=t),data:V.value,"user-name":I.value},null,8,["visible","data","user-name"]),s(ve,{visible:C.value,"onUpdate:visible":a[4]||(a[4]=t=>C.value=t),data:U.value,"user-name":N.value},null,8,["visible","data","user-name"])])}}});const $e=re(be,[["__scopeId","data-v-6c7cf9ee"]]);export{$e as default};
