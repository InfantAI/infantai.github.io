import{c as T,d as q,e as E}from"./doll-eac1cede.js";import{P as O}from"./index-2da662bc.js";import{I as h,_ as Z}from"./DialogForm.vue_vue_type_script_setup_true_lang-22bd69b6.js";import{d as G,r as n,j as H,C as J,N as K,h as u,o as c,c as m,b as _,a as s,w as f,i as Q,t as R,e as b,u as W,Z as X,I as z,F as x,q as Y,M as y,g as ee}from"./index-d4c9a0d0.js";import"./more-b3bba754.js";import"./getAuth-e78cf9ca.js";const ae={class:"list-card-operation"},te={class:"search-input"},oe={class:"list-card-items"},le={class:"list-card-pagination"},ne={key:1,class:"list-card-loading"},se={name:"ListCard"},ue=G({...se,setup(ie){const a=n({current:1,pageSize:12,total:0}),i=n(void 0),C=n([]),v=n(!0),l=async()=>{try{v.value=!0;const e=await T({language:"",page:{pageIndex:a.value.current,pageSize:a.value.pageSize},query:{model:d.value}});C.value=e.content,a.value={...a.value,total:e.totalCount}}catch(e){console.log(e)}finally{v.value=!1}},S=H(()=>i.value?`确认删除后${i.value.name}的所有产品信息将被清空, 且无法恢复`:"");J(()=>{l()});const p=n(!1),d=n(""),g=n(!1),r=n({...h});K(d,e=>{e.length===0&&l()});const V=e=>{a.value.pageSize=e,a.value.current=1,l()},w=e=>{a.value.current=e,l()},D=e=>{g.value=!0,i.value=e},I=async()=>{console.log("deleteProduct.value",i.value),await q(i.value.id).then(()=>{y.success("删除成功"),l()}).catch(e=>{console.log(e),y.error(e.message)}).finally(()=>{g.value=!1})},M=()=>{i.value=void 0,r.value={...h}},k=e=>{p.value=!0,Object.assign(r.value,e),console.log(r.value)},P=()=>{p.value=!0,Object.assign(r.value,h)},N=async e=>{let t=0;e.statusFlag===1?t=2:t=1,console.log("product",e),await E(e.id,t),await l(),y.success("启用成功")};return(e,t)=>{const U=u("t-button"),L=u("t-input"),$=u("t-col"),B=u("t-row"),F=u("t-pagination"),j=u("t-loading"),A=u("t-dialog");return c(),m("div",null,[_("div",ae,[s(U,{onClick:P},{default:f(()=>[Q(R(e.$t("pages.dollModel.create")),1)]),_:1}),_("div",te,[s(L,{modelValue:d.value,"onUpdate:modelValue":t[0]||(t[0]=o=>d.value=o),placeholder:e.$t("pages.dollModel.placeholder"),clearable:"",onEnter:l},{"suffix-icon":f(()=>[d.value===""?(c(),b(W(X),{key:0,size:"var(--td-comp-size-xxxs)"})):z("",!0)]),_:1},8,["modelValue","placeholder"])])]),s(Z,{visible:p.value,"onUpdate:visible":t[1]||(t[1]=o=>p.value=o),data:r.value,onFetchData:l},null,8,["visible","data"]),a.value.total>0&&!v.value?(c(),m(x,{key:0},[_("div",oe,[s(B,{gutter:[16,16]},{default:f(()=>[(c(!0),m(x,null,Y(C.value.slice(a.value.pageSize*(a.value.current-1),a.value.pageSize*a.value.current),o=>(c(),b($,{key:o.index,lg:4,xs:6,xl:3},{default:f(()=>[s(O,{class:"list-card-item",product:o,onDeleteItem:D,onManageProduct:k,onUpdateStatus:N},null,8,["product"])]),_:2},1024))),128))]),_:1})]),_("div",le,[s(F,{modelValue:a.value.current,"onUpdate:modelValue":t[2]||(t[2]=o=>a.value.current=o),"page-size":a.value.pageSize,"onUpdate:pageSize":t[3]||(t[3]=o=>a.value.pageSize=o),total:a.value.total,"page-size-options":[12,24,36],onPageSizeChange:V,onCurrentChange:w},null,8,["modelValue","page-size","total"])])],64)):v.value?(c(),m("div",ne,[s(j,{size:"large",text:e.$t("pages.dollModel.loading")},null,8,["text"])])):z("",!0),s(A,{visible:g.value,"onUpdate:visible":t[4]||(t[4]=o=>g.value=o),header:e.$t("pages.dollModel.deleteConfirm"),body:S.value,"on-cancel":M,onConfirm:I},null,8,["visible","header","body"])])}}});const me=ee(ue,[["__scopeId","data-v-e76340a1"]]);export{me as default};
