import{a as j}from"./doll-6053fa5a.js";import{E as i,d as q,z as W,r,Y as Z,j as I,C as G,W as J,h as l,o as h,c as Q,a as t,w as a,b as v,u as y,Z as k,i as _,e as D,t as b,M as X,g as ee}from"./index-9eb1327f.js";const te=[{title:i("pages.devices.user"),align:"left",width:160,colKey:"userName",fixed:"left"},{title:i("pages.devices.userId"),colKey:"userId",width:160},{title:i("pages.devices.model"),width:160,ellipsis:!0,colKey:"model"},{title:i("pages.devices.modelName"),width:160,ellipsis:!0,colKey:"modelName"},{title:i("pages.devices.lastDataReportTime"),width:160,ellipsis:!0,colKey:"lastTime"},{title:i("pages.devices.onlineStatus"),width:160,ellipsis:!0,colKey:"statusFlag"},{title:i("pages.devices.toyActivationTime"),width:160,ellipsis:!0,colKey:"activateTime"},{title:i("pages.devices.subscriptionDetails"),width:160,ellipsis:!0,colKey:"orderNo"},{title:i("pages.devices.operation"),align:"left",fixed:"right",width:160,colKey:"op"}],ae={class:"search-input"},oe={class:"search-input"},se={class:"search-input"},le={class:"search-input"},ne={name:"ListBase"},ie=q({...ne,setup(ce){const S=W(),u=r([]),c=r({pageSize:20,total:100,current:1}),o=Z({userId:"",payId:"",beginDate:"",endDate:""}),K=e=>{console.log("val>>>",e),o.beginDate=e[0],o.endDate=e[1],f()},m=r(!1),f=async()=>{m.value=!0;try{const e=await j({language:"",page:{pageIndex:c.value.current,pageSize:c.value.pageSize},query:{beginDate:o.beginDate,endDate:o.endDate,payId:o.payId,userId:o.userId}});u.value=e.content,c.value={...c.value,total:e.totalCount}}catch(e){console.log(e)}finally{m.value=!1}},d=r(-1),V=I(()=>{if(d.value>-1){const{name:e}=u.value[d.value];return`删除后，${e}的所有合同信息将被清空，且无法恢复`}return""});G(()=>{f()});const p=r(!1),g=r([1,2]),w=()=>{d.value=-1},N=()=>{u.value.splice(d.value,1),c.value.total=u.value.length;const e=g.value.indexOf(d.value);e>-1&&g.value.splice(e,1),p.value=!1,X.success("删除成功"),w()},T=()=>{w()},$="index",z=e=>{g.value=e},B=(e,s)=>{console.log("分页变化",e,s)},M=(e,s)=>{console.log("统一Change",e,s)},U=e=>{d.value=e.rowIndex,p.value=!0},Y=I(()=>({offsetTop:S.isUseTabsRouter?48:0,container:`.${J}-layout`}));return(e,s)=>{const C=l("t-input"),E=l("t-date-range-picker"),L=l("t-button"),F=l("t-row"),x=l("t-tag"),H=l("t-link"),P=l("t-space"),R=l("t-table"),A=l("t-card"),O=l("t-dialog");return h(),Q("div",null,[t(A,{class:"list-card-container",bordered:!1},{default:a(()=>[t(F,null,{default:a(()=>[v("div",ae,[t(C,{modelValue:o.userId,"onUpdate:modelValue":s[0]||(s[0]=n=>o.userId=n),placeholder:e.$t("pages.payment.placeholderuserid"),clearable:""},{"suffix-icon":a(()=>[t(y(k),{size:"16px"})]),_:1},8,["modelValue","placeholder"])]),v("div",oe,[t(C,{modelValue:o.payId,"onUpdate:modelValue":s[1]||(s[1]=n=>o.payId=n),placeholder:e.$t("pages.payment.placeholderpayid"),clearable:""},{"suffix-icon":a(()=>[t(y(k),{size:"16px"})]),_:1},8,["modelValue","placeholder"])]),v("div",se,[t(E,{mode:"week","value-type":"YYYY-MM-DD HH:mm:ss",clearable:"","allow-input":"",onChange:K})]),v("div",le,[t(L,{onClick:f},{default:a(()=>[_("查询")]),_:1})])]),_:1}),t(R,{data:u.value,columns:y(te),"row-key":$,"vertical-align":"top",hover:!0,pagination:c.value,"selected-row-keys":g.value,loading:m.value,"header-affixed-top":Y.value,onPageChange:B,onChange:M,onSelectChange:z},{statusFlag:a(({row:n})=>[n.statusFlag?(h(),D(x,{key:0,theme:"success",variant:"light"},{default:a(()=>[_(b(e.$t("pages.devices.onlineStatusEnum.online")),1)]),_:1})):(h(),D(x,{key:1,theme:"danger",variant:"light"},{default:a(()=>[_(b(e.$t("pages.devices.onlineStatusEnum.offline")),1)]),_:1}))]),op:a(n=>[t(P,null,{default:a(()=>[t(H,{theme:"danger",onClick:de=>U(n)},{default:a(()=>[_(b(e.$t("pages.devices.stop")),1)]),_:2},1032,["onClick"])]),_:2},1024)]),_:1},8,["data","columns","pagination","selected-row-keys","loading","header-affixed-top"])]),_:1}),t(O,{visible:p.value,"onUpdate:visible":s[2]||(s[2]=n=>p.value=n),header:"确认删除当前所选合同？",body:V.value,"on-cancel":T,onConfirm:N},null,8,["visible","body"])])}}});const pe=ee(ie,[["__scopeId","data-v-b73e5add"]]);export{pe as default};
