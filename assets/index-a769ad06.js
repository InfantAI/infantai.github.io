import{g as ae}from"./doll-eac1cede.js";import{E as i,d as te,z as se,r as l,Y as le,N as ne,j as M,V as oe,C as ie,h as o,o as C,c as ce,a as s,w as n,b as w,u as k,Z as z,e as T,i as v,t as g,M as de,g as ue}from"./index-d4c9a0d0.js";import{_ as re}from"./addDays.vue_vue_type_script_setup_true_lang-bc3fa0ba.js";import{_ as pe}from"./reviewUserNextPlan.vue_vue_type_script_setup_true_lang-576d2281.js";const ve=[{title:i("pages.devices.userId"),align:"left",width:160,colKey:"userId",fixed:"left"},{title:i("pages.devices.username"),colKey:"userName",width:160},{title:i("pages.devices.status"),width:160,ellipsis:!0,colKey:"statusFlag"},{title:i("pages.devices.currentDollModel"),width:160,ellipsis:!0,colKey:"model"},{title:i("pages.devices.registrationTime"),width:160,ellipsis:!0,colKey:"createTime"},{title:i("pages.devices.totalRechargeAmount"),width:160,ellipsis:!0,colKey:"amount"},{title:i("pages.devices.operation"),align:"left",fixed:"right",width:360,colKey:"op"}],ge={class:"search-input"},me={class:"search-input"},fe={class:"search-input"},_e={name:"Devices"},he=te({..._e,setup(ye){const B=se(),r=l([]),c=l({pageSize:20,total:100,current:1}),x=l(""),d=le({beginDate:"",endDate:"",userId:""}),_=l(!1),p=async()=>{_.value=!0;try{const e=await ae({language:"",page:{pageIndex:c.value.current,pageSize:c.value.pageSize},query:d});r.value=e.content,c.value={...c.value,total:e.totalCount}}catch(e){console.log(e)}finally{_.value=!1}},m=l([1,2]),O=e=>{console.log("val>>>",e),d.beginDate=e[0],d.endDate=e[1],p()};ne(()=>d.userId,e=>{e.length===0&&p()});const f=l(!1),Y=e=>{u.value=e.rowIndex,f.value=!0},D=()=>{u.value=-1},u=l(-1),F=M(()=>{if(u.value>-1){const{userName:e,model:a}=r.value[u.value];return`确认停用用户${e}的玩偶${a}?`}return""}),A=()=>{r.value.splice(u.value,1),c.value.total=r.value.length;const e=m.value.indexOf(u.value);e>-1&&m.value.splice(e,1),f.value=!1,de.success("删除成功"),D()},E=()=>{D()},H="index",R=e=>{m.value=e},L=(e,a)=>{console.log("分页变化",e,a),p()},j=(e,a)=>{console.log("统一Change",e,a)},h=l(!1),$=l({}),V=l(""),q=e=>{$.value=e.row,V.value=e.row.userName,h.value=!0},y=l(!1),I=l({}),U=l(""),P=e=>{I.value=e.row,U.value=e.row.userName,y.value=!0},Z=M(()=>({offsetTop:B.isUseTabsRouter?48:0,container:`.${oe}-layout`}));return ie(()=>{p()}),(e,a)=>{const N=o("t-input"),G=o("t-date-range-picker"),J=o("t-row"),K=o("t-tag"),b=o("t-link"),Q=o("t-space"),W=o("t-table"),X=o("t-card"),ee=o("t-dialog");return C(),ce("div",null,[s(X,{class:"list-card-container",bordered:!1},{default:n(()=>[s(J,null,{default:n(()=>[w("div",ge,[s(N,{modelValue:d.userId,"onUpdate:modelValue":a[0]||(a[0]=t=>d.userId=t),placeholder:e.$t("pages.payment.placeholderuserid"),clearable:"",onEnter:p},{"suffix-icon":n(()=>[s(k(z),{size:"16px"})]),_:1},8,["modelValue","placeholder"])]),w("div",me,[s(N,{modelValue:x.value,"onUpdate:modelValue":a[1]||(a[1]=t=>x.value=t),placeholder:e.$t("pages.payment.placeholderpayid"),clearable:""},{"suffix-icon":n(()=>[s(k(z),{size:"16px"})]),_:1},8,["modelValue","placeholder"])]),w("div",fe,[s(G,{"value-type":"YYYY-MM-DD HH:mm:ss",mode:"week",clearable:"","allow-input":"",onChange:O})])]),_:1}),s(W,{data:r.value,columns:k(ve),"row-key":H,"vertical-align":"top",hover:!0,pagination:c.value,"selected-row-keys":m.value,loading:_.value,"header-affixed-top":Z.value,onPageChange:L,onChange:j,onSelectChange:R},{statusFlag:n(({row:t})=>[t.statusFlag==="1"?(C(),T(K,{key:0,theme:"success",variant:"light"},{default:n(()=>[v(g(e.$t("pages.devices.statusOptions.normal")),1)]),_:1})):(C(),T(K,{key:1,theme:"danger",variant:"light"},{default:n(()=>[v(g(e.$t("pages.devices.statusOptions.disabled")),1)]),_:1}))]),op:n(t=>[s(Q,null,{default:n(()=>[s(b,{theme:"primary",onClick:S=>P(t)},{default:n(()=>[v(g(e.$t("pages.devices.viewUserPlan")),1)]),_:2},1032,["onClick"]),s(b,{theme:"success",onClick:S=>q(t)},{default:n(()=>[v(g(e.$t("pages.devices.addVipDays")),1)]),_:2},1032,["onClick"]),s(b,{theme:"danger",onClick:S=>Y(t)},{default:n(()=>[v(g(t.row.statusFlag===1?e.$t("pages.devices.disable"):e.$t("pages.devices.enable")),1)]),_:2},1032,["onClick"])]),_:2},1024)]),_:1},8,["data","columns","pagination","selected-row-keys","loading","header-affixed-top"])]),_:1}),s(ee,{visible:f.value,"onUpdate:visible":a[2]||(a[2]=t=>f.value=t),header:"确定停用此玩偶？",body:F.value,"on-cancel":E,onConfirm:A},null,8,["visible","body"]),s(re,{visible:h.value,"onUpdate:visible":a[3]||(a[3]=t=>h.value=t),data:$.value,"user-name":V.value},null,8,["visible","data","user-name"]),s(pe,{visible:y.value,"onUpdate:visible":a[4]||(a[4]=t=>y.value=t),data:I.value,"user-name":U.value},null,8,["visible","data","user-name"])])}}});const xe=ue(he,[["__scopeId","data-v-ff193e4f"]]);export{xe as default};
